# 39. 组合总和

## 选择题

**1. 在解决组合总和问题时，通常采用哪种算法框架？**

A. 动态规划

B. 回溯法

C. 贪心算法

D. 二分查找

<details>
  <summary>正确答案</summary>答案： B. 回溯法
</details>

**2. 给定数组 `[2, 3, 6, 7]` 和目标数 7，问有几种组合可以使得数的总和为 7？**

A. 1

B. 2

C. 3

D. 4

<details>
  <summary>正确答案</summary>
  <p>答案：B. 2</p>
  <span>和为 7 的组合列表应该是：</span>
  <ul>
    <li><code>[2, 2, 3]</code></li>
    <li><code>[7]</code></li>
  </ul>
</details>

**3. 在组合总和问题中，如果输入数组中的每个数字在每个组合中可以无限次使用，这种问题的特点是？**

A) 只能使用动态规划解决  
B) 可以用贪心算法求解  
C) 适合使用回溯法求解  
D) 必须使用非递归方法解决

<details>
  <summary>正确答案</summary>C) 适合使用回溯法求解
</details>

**4. 对于组合总和问题，以下关于回溯法的描述，哪项是正确的？**

A) 回溯法在遇到第一个有效解后就会停止搜索  
B) 回溯法不支持剪枝操作来优化搜索过程  
C) 回溯法可以找出所有可能的组合，而不仅仅是某些特定的解  
D) 在使用回溯法时，不需要考虑输入数组的元素顺序

<details>
  <summary>正确答案</summary>C) 回溯法可以找出所有可能的组合，而不仅仅是某些特定的解
</details>

## 填空题

**1. 在使用回溯法解决组合总和问题时，基本步骤之一是________，以避免重复计算。**
<details>
  <summary>正确答案</summary>答案：记录当前路径
</details>

**2. 为了优化搜索效率，我们可以在每次递归之前________，从而减少搜索空间。**
<details>
  <summary>正确答案</summary>答案：剪枝
</details>

**3. 在处理组合总和问题时，如果目标数减去当前数字小于0，我们应该________递归调用，因为这表明当前路径不可能满足条件。**
<details>
  <summary>正确答案</summary>立即停止
</details>

**4. 组合总和问题的一个关键步骤是在找到一个有效组合后，我们需要________当前路径，然后尝试其他可能的路径。**
<details>
  <summary>正确答案</summary>回溯
</details>

## 编码实践题

**题目：** 尝试编写一个函数，找出给定数组中所有可以使数字和为目标数 k 的组合。

<details>
  <summary>正确答案</summary>

```python
def combinationSum(candidates, target):
    def backtrack(start, path, target):
        if target == 0:
            res.append(path.copy())
            return
        for i in range(start, len(candidates)):
            if candidates[i] > target:
                continue
            path.append(candidates[i])
            backtrack(i, path, target - candidates[i])
            path.pop()

    res = []
    candidates.sort()
    backtrack(0, [], target)
    return res
```
### 函数逻辑分析

1. **基础逻辑**：该函数首先对候选数组进行排序，这是为了优化回溯过程中的剪枝操作，因为一旦当前累加和加上数组中的某个数已经超过了目标值，那么这个数之后的更大的数就都不需要再考虑了。

2. **回溯法**：核心逻辑在于使用了回溯法，通过递归地尝试每个数字是否被包括在当前组合中，并累加其值来判断是否满足目标和。一旦目标和达成，就将当前路径（即一种组合）添加到结果列表中。

3. **剪枝**：在递归过程中，如果当前的累加和加上下一个考虑的数已经超过了目标数，那么就没必要继续探索这个分支了，这就是所谓的剪枝操作，它可以显著减少不必要的计算。

4. **无限使用元素**：算法允许同一个数字在组合中被无限次使用，这通过在递归调用`backtrack`时传入当前的索引`i`来实现，而不是传入`i + 1`（这样做会跳到下一个元素，不允许重复使用当前元素）。

### 逻辑验证

- **标准情况**：对于一个标准输入，如数组`[2, 3, 6, 7]`和目标数`7`，我们可以通过推理验证函数能找到所有符合条件的组合。函数首先尝试包含`2`，然后再尝试`2`，发现还可以加一个`3`正好等于`7`；然后回溯尝试只包含一个`7`，都能得到正确的组合。

- **边界情况**：
  - 目标数为`0`：没有元素需要被选择，正确返回空列表，符合预期。
  - 数组为空：没有可选元素，无法组成任何和，正确返回空列表。
  - 数组中的所有数字都大于目标数：显然不可能有符合条件的组合，函数返回空列表。

- **特殊情况**：
  - 数组中包含重复元素：排序和回溯的逻辑仍然适用，能够正确处理重复元素。
  - 只有一个元素能够单独满足目标数：回溯法能够找到这样的元素并返回正确的组合。

### 结论

通过上述逻辑分析和验证，我们可以有信心认为给定的`combinationSum`函数能够正确处理各种情况，并找出所有可能使数字和为目标数k的组合。这种逻辑推理方法不仅帮助我们验证了函数的正确性，而且加深了我们对算法本身的理解。
</details>

## 时间复杂度分析题

**题目：** 分析上述回溯法解决“组合总和”问题的时间复杂度。

<details>
  <summary>正确答案</summary>答案：O(N*2^N)，其中 N 是数组长度。在最坏情况下，我们需要遍历数组中的每个数字，并且每个数字都可能被包含在目标和的组合中。
</details>

## 实际应用讨论题

**题目：** 讨论在实际软件开发中，“组合总和”这种类型的问题可能在哪些场景下被用到。

<details>
  <summary>正确答案</summary>可能的答案：在财务管理、资源分配、项目规划、教育领域的课程安排、游戏设计等领域都可能遇到组合总和的问题，特别是在需要找出所有可能的方案以满足特定条件时。
</details>